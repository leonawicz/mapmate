<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Project points onto globe — do_projection â€¢ mapmate</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  <link href="../extra.css" rel="stylesheet">
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">mapmate</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
    Home
  </a>
</li>
<li>
  <a href="../articles/mapmate.html">
    <span class="fa fa-info fa-lg"></span>
     
    Introduction
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-globe fa-lg"></span>
     
    Visual examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/usage_and_limitations.html">Usage &amp; limitations</a>
    </li>
    <li>
      <a href="../articles/networks.html">Network maps</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/ffmpeg.html">
    <span class="fa fa-play-circle-o fa-lg"></span>
     
    ffmpeg
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-book fa-lg"></span>
     
    Reference
  </a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/leonawicz/mapmate">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Project points onto globe</h1>
    </div>

    
    <p>Project points in <code>data</code> onto the globe and filter <code>data</code> to points within the current field of view.</p>
    

    <pre class="usage"><span class='fu'>do_projection</span>(<span class='no'>data</span>, <span class='no'>id</span>, <span class='kw'>lon</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>lat</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>n.period</span> <span class='kw'>=</span> <span class='fl'>360</span>,
  <span class='kw'>n.frames</span> <span class='kw'>=</span> <span class='no'>n.period</span>, <span class='kw'>keep</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>a data frame.</p></td>
    </tr>
    <tr>
      <th>id</th>
      <td><p>character, column name referring to column of <code>data</code> representing frame sequence integer IDs.</p></td>
    </tr>
    <tr>
      <th>lon</th>
      <td><p>starting longitude for rotation sequence or vector of arbitrary longitude sequence.</p></td>
    </tr>
    <tr>
      <th>lat</th>
      <td><p>fixed latitude or vector of arbitrary latitude sequence.</p></td>
    </tr>
    <tr>
      <th>n.period</th>
      <td><p>intended length of the period.</p></td>
    </tr>
    <tr>
      <th>n.frames</th>
      <td><p>intended number of frames in animation.</p></td>
    </tr>
    <tr>
      <th>keep, </th>
      <td><p>if <code>TRUE</code>, return the entire input data drame (no subsetting) along with the boolean <code>inview</code> column.
Otherwise only return the row-filtered data frame with its original columns. Defaults to <code>FALSE</code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>returns a data frame containing visible points on the globe or all points along with a boolean <code>inview</code> column.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>do_projection</code> projects the coordinates in <code>data</code> onto the globe and filters <code>data</code> to the subset of rows
containing data which are visible given the current field of view.
The field of view is defined by the centroid focus latitude and longitude pair in the sequence of latitudes and longitudes whose index
corresponds to the frame ID in <code>data</code>. <code>data</code> may containing rows with multiple unique frame ID values,
which the function will group the data by.
These values are used to determine position in the user-defined lon/lat sequence and the corresponding in-view subset of data
for each subset of <code>data</code> grouped by the `id` variable.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>library</span>(<span class='no'>dplyr</span>)
<span class='fu'>library</span>(<span class='no'>purrr</span>)
<span class='fu'>data</span>(<span class='no'>annualtemps</span>)
<span class='no'>temps</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='no'>annualtemps</span>, <span class='kw'>frameID</span> <span class='kw'>=</span> <span class='no'>Year</span> - <span class='fu'>min</span>(<span class='no'>Year</span>) + <span class='fl'>1</span>)
<span class='fu'>do_projection</span>(<span class='no'>temps</span>, <span class='kw'>id</span><span class='kw'>=</span><span class='st'>"frameID"</span>)</div><div class='output co'>#&gt; <span class='message'>Joining, by = c("lon", "lat", "frameID")</span></div><div class='output co'>#&gt; # A tibble: 28,641 x 5
#&gt;      lon      lat  Year     z frameID
#&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt;
#&gt;  1   -90  0.33300  2010  0.33       1
#&gt;  2   -90 13.66633  2010  0.69       1
#&gt;  3   -90 20.33300  2010  0.54       1
#&gt;  4   -90 26.99967  2010  1.10       1
#&gt;  5   -90 33.66633  2010  1.35       1
#&gt;  6   -90 40.33300  2010  1.49       1
#&gt;  7   -90 46.99967  2010  1.24       1
#&gt;  8   -90 53.66633  2010  0.79       1
#&gt;  9   -90 60.33300  2010  1.40       1
#&gt; 10   -90 66.99967  2010  1.96       1
#&gt; # ... with 28,631 more rows</div><div class='input'><span class='fu'>do_projection</span>(<span class='no'>temps</span>, <span class='kw'>id</span><span class='kw'>=</span><span class='st'>"frameID"</span>, <span class='kw'>keep</span><span class='kw'>=</span><span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; <span class='message'>Joining, by = c("lon", "lat", "frameID")</span></div><div class='output co'>#&gt; # A tibble: 55,080 x 6
#&gt;          lon      lat  Year     z frameID inview
#&gt;        &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;lgl&gt;
#&gt;  1 -176.6667 53.66633  2010  1.09       1  FALSE
#&gt;  2 -176.6667 66.99967  2010  3.21       1  FALSE
#&gt;  3 -176.6667 73.66633  2010  2.76       1  FALSE
#&gt;  4 -170.0000 53.66633  2010  0.91       1  FALSE
#&gt;  5 -170.0000 60.33300  2010  2.47       1  FALSE
#&gt;  6 -170.0000 66.99967  2010  2.73       1  FALSE
#&gt;  7 -163.3333 20.33300  2010  0.19       1  FALSE
#&gt;  8 -163.3333 53.66633  2010  0.79       1  FALSE
#&gt;  9 -163.3333 60.33300  2010  1.43       1  FALSE
#&gt; 10 -163.3333 66.99967  2010  1.28       1  FALSE
#&gt; # ... with 55,070 more rows</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Matthew Leonawicz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
